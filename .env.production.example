# ============================================
# CONFIGURACIÓN DE PRODUCCIÓN PARA COOLIFY + TRAEFIK
# ============================================

# Database
DATABASE_URL="postgresql://username:password@postgres:5432/gestion_visitas"

# JWT
JWT_SECRET="your-super-secret-jwt-key-change-this-in-production"
JWT_EXPIRES_IN="24h"
REFRESH_TOKEN_SECRET="your-refresh-token-secret-change-this-too"
REFRESH_TOKEN_EXPIRES_IN="7d"

# Server
PORT=3001
NODE_ENV="production"

# Security
BCRYPT_SALT_ROUNDS=10
RATE_LIMIT_WINDOW_MS=900000  # 15 minutos en milisegundos
RATE_LIMIT_MAX_REQUESTS=100

# CORS Configuration
CORS_ALLOWED_ORIGINS="https://app.prodevfabian.cloud,https://api.prodevfabian.cloud"

# Logging
LOG_LEVEL="info"
LOG_TO_FILE="true"

# Health Check Configuration
HEALTH_CHECK_INTERVAL=30000  # 30 segundos
HEALTH_CHECK_TIMEOUT=5000    # 5 segundos

# Uploads Configuration
UPLOAD_MAX_FILE_SIZE=10485760  # 10MB
UPLOAD_ALLOWED_TYPES="image/jpeg,image/png,image/gif"

# Memory Management
NODE_OPTIONS="--max-old-space-size=512"

# Coolify/Traefik Specific
COOLIFY_APP_NAME="gestion-visitas-backend"
TRAEFIK_HEALTH_PATH="/health"
TRAEFIK_READINESS_PATH="/health/readiness"
TRAEFIK_LIVENESS_PATH="/health/liveness"

# ============================================
# NOTAS PARA DESPLIEGUE EN COOLIFY:
# ============================================
# 1. Asegúrate de que los Directory Mounts estén configurados:
#    - /app/uploads
#    - /app/tmp  
#    - /app/logs
#
# 2. Configura el healthcheck en Coolify:
#    - Path: /health
#    - Interval: 30s
#    - Timeout: 5s
#
# 3. Variables de entorno obligatorias:
#    - DATABASE_URL (proporcionada por Coolify PostgreSQL)
#    - JWT_SECRET (generar uno seguro)
#    - CORS_ALLOWED_ORIGINS
#
# 4. El servidor escucha en 0.0.0.0:${PORT}
#    - Traefik redirige tráfico a este puerto
#
# 5. Los logs se escriben en /app/logs/
#    - app.log: logs generales
#    - errors.log: solo errores
#    - http.log: peticiones HTTP (producción)